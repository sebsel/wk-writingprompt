!function(){var t=function(t){var e=document.getElementById(t);return{show:function(){e.style.display="block"},hide:function(){e.style.display="none"},add:function(t){e.innerHTML=e.innerHTML+t},set:function(t){e.innerHTML=t},get:function(){return e.innerHTML},on:function(t,n){e.addEventListener(n,function(e){e.preventDefault(),t()},!1)},val:function(){return e.value},e:function(){return e}}},e={wk:{},words:[],forgetme:function(){localStorage.setItem("key",""),location.reload()},load:function(t){this.wk=new WkApi(localStorage.getItem("key")),this.wk.getVocabulary().then(function(n){e.words=_.reject(n,function(t){return null==t.userSpecific}),t()},function(){alert("Key could not be fetched. Is it really your key?"),e.forgetme()})},fetch:function(){var n=t("key").val();/[0-9a-f]{32}/g.test(n)?(localStorage.setItem("key",n),e.render()):alert("Invalid key! Must be 32 characters.")},randomWords:function(){return _.sample(this.words,t("amount").val())},render:function(){t("explanation").hide(),e.load(function(){t("output").set(""),_.each(e.randomWords(),function(e){var n=_.template(t("word").get());t("output").add(n(e))}),t("app").show()})},start:function(){localStorage.getItem("key")&&this.render(),t("fetch").on(this.fetch,"submit"),t("forgetme").on(this.forgetme,"click"),t("startagain").on(this.render,"click"),t("amount").on(this.render,"change")}};e.start()}();